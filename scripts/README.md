# ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ Google Sheets

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç –≤–∞—à—É Google —Ç–∞–±–ª–∏—Ü—É —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è Hi Food.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Google Sheets API

#### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Google Cloud Console

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Cloud Console](https://console.cloud.google.com)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: `Hi Food App`

#### –®–∞–≥ 2: –í–∫–ª—é—á–∏—Ç–µ Google Sheets API

1. –í –º–µ–Ω—é —Å–ª–µ–≤–∞: **APIs & Services** ‚Üí **Library**
2. –ù–∞–π–¥–∏—Ç–µ: **Google Sheets API**
3. –ù–∞–∂–º–∏—Ç–µ **Enable**

#### –®–∞–≥ 3: –°–æ–∑–¥–∞–π—Ç–µ Service Account

1. –í –º–µ–Ω—é —Å–ª–µ–≤–∞: **APIs & Services** ‚Üí **Credentials**
2. –ù–∞–∂–º–∏—Ç–µ **Create Credentials** ‚Üí **Service Account**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Service account name**: `hi-food-sheets`
   - **Service account ID**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è
   - **Description**: `Service account for Hi Food Google Sheets access`
4. –ù–∞–∂–º–∏—Ç–µ **Create and Continue**
5. **Role**: –≤—ã–±–µ—Ä–∏—Ç–µ **Editor** (–∏–ª–∏ –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å)
6. –ù–∞–∂–º–∏—Ç–µ **Done**

#### –®–∞–≥ 4: –°–æ–∑–¥–∞–π—Ç–µ –∫–ª—é—á (credentials)

1. –ù–∞–π–¥–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π Service Account –≤ —Å–ø–∏—Å–∫–µ
2. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Keys**
4. –ù–∞–∂–º–∏—Ç–µ **Add Key** ‚Üí **Create new key**
5. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø: **JSON**
6. –ù–∞–∂–º–∏—Ç–µ **Create**
7. –§–∞–π–ª `.json` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç—Å—è

#### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env —Ñ–∞–π–ª

–û—Ç–∫—Ä–æ–π—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π JSON —Ñ–∞–π–ª –∏ –Ω–∞–π–¥–∏—Ç–µ:
- `client_email` - —ç—Ç–æ –±—É–¥–µ—Ç –≤–∞—à GOOGLE_SERVICE_ACCOUNT_EMAIL
- `private_key` - —ç—Ç–æ –±—É–¥–µ—Ç –≤–∞—à GOOGLE_PRIVATE_KEY

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞):

```bash
# GOOGLE SHEETS
GOOGLE_SHEET_ID=18MgwzpNpnNt9H0LeIjxnXZYbEmkefrHLwHIHnMCgeho
GOOGLE_SERVICE_ACCOUNT_EMAIL=hi-food-sheets@your-project.iam.gserviceaccount.com
GOOGLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour private key here\n-----END PRIVATE KEY-----\n"
```

**–í–ê–ñ–ù–û**: Private key –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–∞–≤—ã—á–∫–∞—Ö –∏ —Å `\n` –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫!

#### –®–∞–≥ 6: –î–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø Service Account –∫ —Ç–∞–±–ª–∏—Ü–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à—É Google —Ç–∞–±–ª–∏—Ü—É: https://docs.google.com/spreadsheets/d/18MgwzpNpnNt9H0LeIjxnXZYbEmkefrHLwHIHnMCgeho/edit
2. –ù–∞–∂–º–∏—Ç–µ **Share** (–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–∞)
3. –í –ø–æ–ª–µ "Add people and groups" –≤—Å—Ç–∞–≤—å—Ç–µ email –∏–∑ `GOOGLE_SERVICE_ACCOUNT_EMAIL`
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å: **Editor** (–†–µ–¥–∞–∫—Ç–æ—Ä)
5. –ù–∞–∂–º–∏—Ç–µ **Send** (–æ—Ç–ø—Ä–∞–≤—å—Ç–µ –±–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç

```bash
cd backend
npm run populate-sheets
```

## üìä –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç?

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. ‚úÖ –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –≤–∞—à–µ–π Google —Ç–∞–±–ª–∏—Ü–µ —á–µ—Ä–µ–∑ API
2. ‚úÖ –°–æ–∑–¥–∞—ë—Ç 5 –ª–∏—Å—Ç–æ–≤ (sheets):
   - `user` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
   - `menu` - –º–µ–Ω—é
   - `orders` - –∑–∞–∫–∞–∑—ã
   - `ads` - —Ä–µ–∫–ª–∞–º–Ω—ã–µ –±–∞–Ω–Ω–µ—Ä—ã
   - `bonus_transactions` - –±–æ–Ω—É—Å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

3. ‚úÖ –ó–∞–ø–æ–ª–Ω—è–µ—Ç –∫–∞–∂–¥—ã–π –ª–∏—Å—Ç —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
   - **user**: 3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∫–∞—Ä—Ç–∞–º–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
   - **menu**: 15 –±–ª—é–¥ (–ø–∏—Ü—Ü—ã, –±—É—Ä–≥–µ—Ä—ã, —Å–∞–ª–∞—Ç—ã, –Ω–∞–ø–∏—Ç–∫–∏, –¥–µ—Å–µ—Ä—Ç—ã)
   - **orders**: 5 –∑–∞–∫–∞–∑–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
   - **ads**: 4 –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –±–∞–Ω–Ω–µ—Ä–∞
   - **bonus_transactions**: 7 –±–æ–Ω—É—Å–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

4. ‚úÖ –û—á–∏—â–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É: https://docs.google.com/spreadsheets/d/18MgwzpNpnNt9H0LeIjxnXZYbEmkefrHLwHIHnMCgeho/edit
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –µ—Å—Ç—å 5 –ª–∏—Å—Ç–æ–≤
3. –í –∫–∞–∂–¥–æ–º –ª–∏—Å—Ç–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–∞–Ω–Ω—ã–µ:
   - –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ - –∑–∞–≥–æ–ª–æ–≤–∫–∏
   - –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ - –¥–∞–Ω–Ω—ã–µ

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Google Sheets –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

–ü–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ backend –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Google Sheets:

```bash
# –í .env –∏–∑–º–µ–Ω–∏—Ç–µ:
DATA_PROVIDER=google_sheets
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend:
```bash
npm run dev
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è:
```bash
curl http://localhost:3000/api/menu
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "GOOGLE_SERVICE_ACCOUNT_EMAIL –Ω–µ –Ω–∞–π–¥–µ–Ω"
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env` —Ñ–∞–π–ª (—Å–º. –®–∞–≥ 5)

### –û—à–∏–±–∫–∞: "403 Forbidden"
**–†–µ—à–µ–Ω–∏–µ**: Service Account –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–∞–±–ª–∏—Ü–µ
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É
2. Share ‚Üí –¥–æ–±–∞–≤—å—Ç–µ email Service Account
3. –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞ "Editor"

### –û—à–∏–±–∫–∞: "Unable to parse range: user"
**–†–µ—à–µ–Ω–∏–µ**: –õ–∏—Å—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –µ–≥–æ

### –û—à–∏–±–∫–∞: "Invalid grant"
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å GOOGLE_PRIVATE_KEY:
- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–∞–≤—ã—á–∫–∞—Ö
- –î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å `\n` –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫
- –î–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `-----BEGIN PRIVATE KEY-----`

## üìù –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞

```
üöÄ –ù–∞—á–∞–ª–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è Google Sheets...

üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–∞–±–ª–∏—Ü–µ...
‚úÖ –î–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ "Hi food Delivery Database" –ø–æ–ª—É—á–µ–Ω

üìù –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–∏—Å—Ç–∞ "user"...
‚úÖ –õ–∏—Å—Ç "user" –∑–∞–ø–æ–ª–Ω–µ–Ω (3 –∑–∞–ø–∏—Å–µ–π)

üìù –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–∏—Å—Ç–∞ "menu"...
‚úÖ –õ–∏—Å—Ç "menu" –∑–∞–ø–æ–ª–Ω–µ–Ω (15 –∑–∞–ø–∏—Å–µ–π)

üìù –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–∏—Å—Ç–∞ "orders"...
‚úÖ –õ–∏—Å—Ç "orders" –∑–∞–ø–æ–ª–Ω–µ–Ω (5 –∑–∞–ø–∏—Å–µ–π)

üìù –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–∏—Å—Ç–∞ "ads"...
‚úÖ –õ–∏—Å—Ç "ads" –∑–∞–ø–æ–ª–Ω–µ–Ω (4 –∑–∞–ø–∏—Å–µ–π)

üìù –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–∏—Å—Ç–∞ "bonus_transactions"...
‚úÖ –õ–∏—Å—Ç "bonus_transactions" –∑–∞–ø–æ–ª–Ω–µ–Ω (7 –∑–∞–ø–∏—Å–µ–π)

üéâ –í—Å–µ –ª–∏—Å—Ç—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã!

üìä –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É: https://docs.google.com/spreadsheets/d/18MgwzpNpnNt9H0LeIjxnXZYbEmkefrHLwHIHnMCgeho/edit

‚úÖ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DATA_PROVIDER=google_sheets
```

## üéØ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ó–∞–ø—É—Å–∫ —Å debug –ª–æ–≥–∞–º–∏
```bash
DEBUG=* npm run populate-sheets
```

### –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –ª–∏—Å—Ç–æ–≤ –±–µ–∑ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –±–ª–æ–∫ –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö

### –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –ª–∏—Å—Ç–∞
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏ —É–¥–∞–ª–∏—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ –ª–∏—Å—Ç—ã –∏–∑ `SHEETS_DATA`

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–í–ê–ñ–ù–û**:
- ‚ùå –ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª –≤ Git
- ‚ùå –ù–ï –ø—É–±–ª–∏–∫—É–π—Ç–µ JSON credentials
- ‚úÖ –î–æ–±–∞–≤—å—Ç–µ `.env` –≤ `.gitignore`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ production

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [Google Sheets API Documentation](https://developers.google.com/sheets/api)
- [Service Accounts Overview](https://cloud.google.com/iam/docs/service-accounts)
- [Google Cloud Console](https://console.cloud.google.com)

---

**–ì–æ—Ç–æ–≤–æ! üéâ –í–∞—à–∞ Google —Ç–∞–±–ª–∏—Ü–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏!**
