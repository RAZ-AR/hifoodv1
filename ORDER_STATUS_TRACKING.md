# Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²

## Ğ§Ñ‚Ğ¾ Ğ±Ñ‹Ğ»Ğ¾ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾

### 1. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ GET endpoint Ğ´Ğ»Ñ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° Ğ·Ğ°ĞºĞ°Ğ·Ğ° (backend)
**Ğ¤Ğ°Ğ¹Ğ»:** `backend/src/index.ts`

Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ endpoint:
```typescript
// Get order status
app.get('/api/orders/:orderId/status', async (req: Request, res: Response) => {
  try {
    const order = await db.getOrderById(req.params.orderId!);

    if (!order) {
      return res.status(404).json({ error: 'Order not found' });
    }

    return res.json({ status: order.status });
  } catch (error: any) {
    return res.status(500).json({ error: error.message });
  }
});
```

**URL:** `GET /api/orders/:orderId/status`
**ĞÑ‚Ğ²ĞµÑ‚:** `{ "status": "accepted" | "preparing" | "delivering" | "delivered" }`

### 2. Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½ hook Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² (frontend)
**Ğ¤Ğ°Ğ¹Ğ»:** `src/hooks/useOrderTracking.ts`

Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ:
- âœ… Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ñ‹Ğ¹ Ğ»Ğ¾Ğ³Ğ³Ğ¸Ğ½Ğ³ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ¸
- âœ… ĞĞµĞ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° Ğ¿Ñ€Ğ¸ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
- âœ… ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¾Ğ¿Ñ€Ğ¾Ñ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 10 ÑĞµĞºÑƒĞ½Ğ´
- âœ… ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ UI Ğ¿Ñ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°
- âœ… ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· 30 ÑĞµĞºÑƒĞ½Ğ´ Ğ¿Ğ¾ÑĞ»Ğµ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸

### 3. ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ Ğ²Ğ¸Ğ´Ğ¶ĞµÑ‚Ğ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°
**Ğ¤Ğ°Ğ¹Ğ»:** `src/components/OrderStatusTracker.tsx`

ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½:
- ğŸ¨ Ğ“Ğ¾Ğ»ÑƒĞ±Ğ¾Ğ¹ Ğ³Ñ€Ğ°Ğ´Ğ¸ĞµĞ½Ñ‚Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ğ½
- ğŸ“Š Ğ“Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ-Ğ±Ğ°Ñ€ Ñ Ñ†Ğ²ĞµÑ‚Ğ½Ñ‹Ğ¼Ğ¸ ĞºÑ€ÑƒĞ³Ğ°Ğ¼Ğ¸
- âœ¨ Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº "X day streak"
- âœ“ Ğ“Ğ°Ğ»Ğ¾Ñ‡ĞºĞ¸ Ğ² Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ½Ñ‹Ñ… ÑÑ‚Ğ°Ğ¿Ğ°Ñ…
- ã€°ï¸ ĞŸÑƒĞ½ĞºÑ‚Ğ¸Ñ€Ğ½Ğ°Ñ Ğ»Ğ¸Ğ½Ğ¸Ñ Ğ´Ğ»Ñ Ğ±ÑƒĞ´ÑƒÑ‰Ğ¸Ñ… ÑÑ‚Ğ°Ğ¿Ğ¾Ğ²

## ĞšĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°

### ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Telegram Bot   â”‚
â”‚  (Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚)    â”‚
â”‚  ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ² Ğ‘Ğ”    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Backend API   â”‚
â”‚ GET /orders/    â”‚
â”‚ :id/status      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 10 ÑĞµĞº
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚
â”‚ useOrderTrackingâ”‚
â”‚   (Ğ¾Ğ¿Ñ€Ğ¾Ñ)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OrderStatus    â”‚
â”‚    Tracker      â”‚
â”‚   (Ğ²Ğ¸Ğ´Ğ¶ĞµÑ‚)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ­Ñ‚Ğ°Ğ¿Ñ‹ Ğ·Ğ°ĞºĞ°Ğ·Ğ°

1. **accepted** (ĞŸÑ€Ğ¸Ğ½ÑÑ‚) ğŸŸ£ Ğ Ğ¾Ğ·Ğ¾Ğ²Ñ‹Ğ¹
   - Ğ—Ğ°ĞºĞ°Ğ· Ğ¿Ñ€Ğ¸Ğ½ÑÑ‚ Ğ¸ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ğ½ Ğ½Ğ° ĞºÑƒÑ…Ğ½Ñ

2. **preparing** (Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ñ‚ÑÑ) ğŸ”µ Ğ¡Ğ¸Ğ½Ğ¸Ğ¹
   - ĞĞ°ÑˆĞ¸ Ğ¿Ğ¾Ğ²Ğ°Ñ€Ğ° Ğ³Ğ¾Ñ‚Ğ¾Ğ²ÑÑ‚ Ğ²Ğ°Ñˆ Ğ·Ğ°ĞºĞ°Ğ·

3. **delivering** (Ğ”Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ) ğŸ”· Ğ“Ğ¾Ğ»ÑƒĞ±Ğ¾Ğ¹
   - ĞšÑƒÑ€ÑŒĞµÑ€ ÑƒĞ¶Ğµ Ğ² Ğ¿ÑƒÑ‚Ğ¸ Ğº Ğ²Ğ°Ğ¼!

4. **delivered** (Ğ”Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½) ğŸŸ¢ Ğ—ĞµĞ»ĞµĞ½Ñ‹Ğ¹
   - ĞŸÑ€Ğ¸ÑÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ°Ğ¿Ğ¿ĞµÑ‚Ğ¸Ñ‚Ğ°! ğŸ½ï¸

## ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹

### 1. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ° (F12)

ĞŸÑ€Ğ¸ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¼ Ğ·Ğ°ĞºĞ°Ğ·Ğµ Ğ²Ñ‹ ÑƒĞ²Ğ¸Ğ´Ğ¸Ñ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸:
```
ğŸ“¦ Order tracking initialized: #64503093, status: accepted
ğŸ”„ Initial status check for: #64503093
ğŸ“¥ Initial status: accepted
ğŸ”„ Polling order status for: #64503093
ğŸ“¥ Received status: accepted (previous: accepted)
```

### 2. ĞšĞ¾Ğ³Ğ´Ğ° Ğ±Ğ¾Ñ‚ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ² Telegram

```
ğŸ”„ Polling order status for: #64503093
ğŸ“¥ Received status: preparing (previous: accepted)
ğŸ”” Status changed: accepted â†’ preparing
```

### 3. Ğ’Ğ¸Ğ´Ğ¶ĞµÑ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑÑ

- ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ-Ğ±Ğ°Ñ€ Ğ¿ĞµÑ€ĞµĞ´Ğ²Ğ¸Ğ½ĞµÑ‚ÑÑ Ğ½Ğ° ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑÑ‚Ğ°Ğ¿
- ĞšÑ€ÑƒĞ³ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑÑ Ñ†Ğ²ĞµÑ‚Ğ¾Ğ¼ Ğ¸ Ğ¿Ğ¾ÑĞ²Ğ¸Ñ‚ÑÑ Ğ³Ğ°Ğ»Ğ¾Ñ‡ĞºĞ° âœ“
- Ğ›Ğ¸Ğ½Ğ¸Ñ ÑÑ‚Ğ°Ğ½ĞµÑ‚ ÑĞ¿Ğ»Ğ¾ÑˆĞ½Ğ¾Ğ¹ Ğ´Ğ¾ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾ ÑÑ‚Ğ°Ğ¿Ğ°
- Ğ¢ĞµĞºÑÑ‚ "X day streak" ÑƒĞ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑÑ

## Troubleshooting

### Ğ’Ğ¸Ğ´Ğ¶ĞµÑ‚ Ğ½Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ

1. **ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ°:**
   - Ğ•ÑÑ‚ÑŒ Ğ»Ğ¸ Ğ»Ğ¾Ğ³Ğ¸ `ğŸ”„ Polling order status`?
   - Ğ•ÑÑ‚ÑŒ Ğ»Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ `âŒ Error polling order status`?

2. **ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ backend:**
   - Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ»Ğ¸ endpoint `GET /api/orders/:orderId/status`?
   - Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ»Ğ¸ Ğ¾Ğ½ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ‚ÑƒÑ?

3. **ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ localStorage:**
   ```javascript
   localStorage.getItem('currentOrderId')    // ID Ğ·Ğ°ĞºĞ°Ğ·Ğ°
   localStorage.getItem('currentOrderStatus') // Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ
   ```

4. **ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ ID:**
   - Ğ’ Telegram: `#64503093`
   - Ğ’ localStorage Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ: `#64503093` (Ñ Ñ€ĞµÑˆĞµÑ‚ĞºĞ¾Ğ¹)

### Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ½Ğµ Ğ¿Ñ€Ğ¸Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ñ Ğ±ÑĞºĞµĞ½Ğ´Ğ°

1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ, Ñ‡Ñ‚Ğ¾ Ğ±Ğ¾Ñ‚ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ² Ğ‘Ğ”
2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ, Ñ‡Ñ‚Ğ¾ ID Ğ·Ğ°ĞºĞ°Ğ·Ğ° ÑĞ¾Ğ²Ğ¿Ğ°Ğ´Ğ°ĞµÑ‚
3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸ backend Ğ½Ğ° Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

### Ğ’Ğ¸Ğ´Ğ¶ĞµÑ‚ Ğ½Ğµ Ğ¿Ğ¾ÑĞ²Ğ»ÑĞµÑ‚ÑÑ

1. Ğ£Ğ±ĞµĞ´Ğ¸Ñ‚ĞµÑÑŒ, Ñ‡Ñ‚Ğ¾ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ° Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ:
   ```typescript
   import { saveOrder } from '@/hooks/useOrderTracking';
   saveOrder(orderId, 'accepted');
   ```

2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ, Ñ‡Ñ‚Ğ¾ ID ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½ Ğ² localStorage

## ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸

### Ğ˜Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ» Ğ¾Ğ¿Ñ€Ğ¾ÑĞ°
```typescript
const POLL_INTERVAL = 10000; // 10 ÑĞµĞºÑƒĞ½Ğ´
```

### ĞĞ²Ñ‚Ğ¾ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ»Ğµ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸
```typescript
const AUTO_CLEAR_DELAY = 30000; // 30 ÑĞµĞºÑƒĞ½Ğ´
```

### ĞšĞ»ÑÑ‡Ğ¸ localStorage
```typescript
const ORDER_ID_KEY = 'currentOrderId';
const ORDER_STATUS_KEY = 'currentOrderStatus';
```

## API Reference

### Frontend â†’ Backend

**Endpoint:** `GET /api/orders/:orderId/status`

**Request:**
```
GET https://your-backend.com/api/orders/64503093/status
```

**Response (200):**
```json
{
  "status": "preparing"
}
```

**Response (404):**
```json
{
  "error": "Order not found"
}
```

### Telegram Bot â†’ Backend

**Endpoint:** `PATCH /api/orders/:orderId/status`

**Request:**
```json
{
  "status": "preparing"
}
```

**Response (200):**
```json
{
  "id": "64503093",
  "status": "preparing",
  ...
}
```
