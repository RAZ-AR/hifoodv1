# üöÄ –î–µ–ø–ª–æ–π Backend –Ω–∞ Render.com

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–í–∞—à –ø—Ä–æ–µ–∫—Ç —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –Ω–∞ Render —Å –ø–æ–º–æ—â—å—é `render.yaml`.

---

## –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –∏ –∑–∞–ø—É—à–µ–Ω—ã –Ω–∞ GitHub
‚úÖ –§–∞–π–ª `render.yaml` —Å–æ–∑–¥–∞–Ω –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
‚úÖ Backend –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é

---

## –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ Web Service –Ω–∞ Render

### –í–∞—Ä–∏–∞–Ω—Ç A: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Blueprint (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://dashboard.render.com
2. –ù–∞–∂–º–∏—Ç–µ **"New +"** ‚Üí **"Blueprint"**
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `hifoodv1`
4. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç `render.yaml` –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç —Å–µ—Ä–≤–∏—Å
5. –ù–∞–∂–º–∏—Ç–µ **"Apply"**

### –í–∞—Ä–∏–∞–Ω—Ç B: –†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://dashboard.render.com
2. –ù–∞–∂–º–∏—Ç–µ **"New +"** ‚Üí **"Web Service"**
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `hifoodv1`
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

**–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```
Name: hifood-backend
Region: Frankfurt (–∏–ª–∏ –±–ª–∏–∂–∞–π—à–∏–π –∫ –°–µ—Ä–±–∏–∏)
Branch: main
Root Directory: backend
```

**Build & Deploy:**
```
Build Command: npm install && npm run build
Start Command: npm start
```

**Environment:**
- Node 18+

---

## –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í —Ä–∞–∑–¥–µ–ª–µ **Environment Variables** –¥–æ–±–∞–≤—å—Ç–µ:

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
NODE_ENV=production
PORT=3000
DATA_PROVIDER=mock
```

### Telegram Bot (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):

```env
TELEGRAM_BOT_TOKEN=8270751448:AAH6f6u2hCT0TAKSjVaCbWkwdqJWOmmYvqE
```

### CORS:

```env
ALLOWED_ORIGINS=https://raz-ar.github.io,https://hifoodv1.onrender.com
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - Supabase (–µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ë–î):

```env
SUPABASE_URL=–≤–∞—à_url
SUPABASE_KEY=–≤–∞—à_–∫–ª—é—á
```

---

## –®–∞–≥ 4: –î–µ–ø–ª–æ–π

1. –ù–∞–∂–º–∏—Ç–µ **"Create Web Service"** –∏–ª–∏ **"Apply"** (–¥–ª—è Blueprint)
2. Render –Ω–∞—á–Ω–µ—Ç —Å–±–æ—Ä–∫—É –∏ –¥–µ–ø–ª–æ–π (–∑–∞–π–º–µ—Ç 3-5 –º–∏–Ω—É—Ç)
3. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å—Ç–∞—Ç—É—Å–∞ **"Live"** (–∑–µ–ª–µ–Ω—ã–π)

---

## –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤–∞—à backend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
```
https://hifood-backend.onrender.com
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ health endpoint:
```bash
curl https://hifood-backend.onrender.com/health
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
```json
{
  "status": "ok",
  "timestamp": "2025-10-24T...",
  "provider": "mock"
}
```

---

## –®–∞–≥ 6: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Frontend

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è backend –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å URL –≤ frontend:

### –§–∞–π–ª: `/src/config/api.ts`

**–î–æ:**
```typescript
const API_BASE_URL = import.meta.env.PROD
  ? 'https://hifoodv1.onrender.com/api'  // ‚Üê —Å—Ç–∞—Ä—ã–π URL
  : 'http://localhost:3000/api';
```

**–ü–æ—Å–ª–µ:**
```typescript
const API_BASE_URL = import.meta.env.PROD
  ? 'https://hifood-backend.onrender.com/api'  // ‚Üê –Ω–æ–≤—ã–π URL
  : 'http://localhost:3000/api';
```

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
```bash
git add src/config/api.ts
git commit -m "Update backend URL to Render"
git push origin main
```

Frontend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç—Å—è –Ω–∞ GitHub Pages –≤ —Ç–µ—á–µ–Ω–∏–µ 1-2 –º–∏–Ω—É—Ç.

---

## –®–∞–≥ 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://raz-ar.github.io/hifoodv1/
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É –º–µ–Ω—é (–¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å 5 –±–ª—é–¥ –∏–∑ Mock Provider)
3. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É
4. –û—Ñ–æ—Ä–º–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑:
   - –ò–º—è: Test User
   - –ê–¥—Ä–µ—Å: –ö–Ω–µ–∑–∞ –ú–∏–ª–æ—à–∞ 10
   - –ö–≤–∞—Ä—Ç–∏—Ä–∞: 25
   - Telegram: –≤—ã–±—Ä–∞—Ç—å
   - –û–ø–ª–∞—Ç–∞: –ù–∞–ª–∏—á–Ω—ã–µ
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - ‚úÖ –ó–∞–∫–∞–∑ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–π—Ç–∏ –≤ –≥—Ä—É–ø–ø—É Telegram `-3233318512`
   - ‚úÖ –î—É–±–ª–∏–∫–∞—Ç –∑–∞–∫–∞–∑–∞ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–π—Ç–∏ –≤–∞–º –≤ –ª–∏—á–∫—É –±–æ—Ç–∞

---

## üîß –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Build Failed

**–û—à–∏–±–∫–∞:** `npm ERR! code ELIFECYCLE`

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `backend/package.json` –µ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç—ã:
   ```json
   "scripts": {
     "build": "tsc",
     "start": "node dist/index.js"
   }
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `tsconfig.json` –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Application Failed to Respond

**–û—à–∏–±–∫–∞:** Service –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ health check

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `PORT` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `3000`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Render Dashboard ‚Üí Logs
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç:
   ```typescript
   const PORT = process.env.PORT || 3000;
   app.listen(PORT, '0.0.0.0', () => {...});
   ```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: CORS Error

**–û—à–∏–±–∫–∞:** `Access to fetch ... has been blocked by CORS policy`

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `ALLOWED_ORIGINS` –≤ Render Environment Variables
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç `https://raz-ar.github.io`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `backend/src/index.ts`:
   ```typescript
   app.use(cors({
     origin: process.env.ALLOWED_ORIGINS?.split(',') || '*',
     credentials: true
   }));
   ```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: Telegram Bot –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

**–û—à–∏–±–∫–∞:** –ó–∞–∫–∞–∑—ã –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –≥—Ä—É–ø–ø—É

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TELEGRAM_BOT_TOKEN` –≤ Environment Variables
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É `-3233318512`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç —è–≤–ª—è–µ—Ç—Å—è **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º** –≥—Ä—É–ø–ø—ã
4. –î–∞–π—Ç–µ –±–æ—Ç—É –ø—Ä–∞–≤–∞:
   - Post Messages
   - Edit Messages
   - Delete Messages

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Render Dashboard
- **Logs:** –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **Metrics:** CPU, Memory, Request Rate
- **Deploy History:** –ò—Å—Ç–æ—Ä–∏—è –¥–µ–ø–ª–æ–µ–≤

### Health Check
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞
curl https://hifood-backend.onrender.com/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ–Ω—é
curl https://hifood-backend.onrender.com/api/menu

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
curl https://hifood-backend.onrender.com/api/stats
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:

1. ‚úÖ Backend —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Render
2. ‚úÖ Frontend —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ GitHub Pages
3. ‚úÖ Telegram –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å Supabase (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö):**
   - –ò–∑–º–µ–Ω–∏—Ç–µ `DATA_PROVIDER=supabase` –≤ Render
   - –î–æ–±–∞–≤—å—Ç–µ `SUPABASE_URL` –∏ `SUPABASE_KEY`
   - Restart service

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Custom Domain:**
   - Render Settings ‚Üí Custom Domain
   - –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, api.hifood.rs)

3. **–í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π:**
   - –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —á–µ—Ä–µ–∑ GitHub integration
   - –ö–∞–∂–¥—ã–π push –≤ `main` ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

**Render Free Tier:**
- ‚úÖ 750 —á–∞—Å–æ–≤ –≤ –º–µ—Å—è—Ü (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è 1 —Å–µ—Ä–≤–∏—Å–∞ 24/7)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–ø–ª–æ–∏ –∏–∑ GitHub
- ‚ö†Ô∏è –ó–∞—Å—ã–ø–∞–µ—Ç –ø–æ—Å–ª–µ 15 –º–∏–Ω—É—Ç –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è (–ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –º–µ–¥–ª–µ–Ω–Ω—ã–º ~30 —Å–µ–∫)
- ‚ö†Ô∏è 512 MB RAM, 0.1 CPU

**–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ:**
- Starter Plan: $7/–º–µ—Å—è—Ü (–±–µ–∑ –∑–∞—Å—ã–ø–∞–Ω–∏—è, –±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤)

---

## üÜò –ü–æ–º–æ—â—å

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:** Render Dashboard ‚Üí Logs
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:** Render Dashboard ‚Üí Environment
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:** Render Dashboard ‚Üí Events

**–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∏–ª–¥
cd backend
npm install
npm run build
npm start

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cat .env
```

---

## ‚úÖ Checklist –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

- [ ] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –∏ –∑–∞–ø—É—à–µ–Ω—ã
- [ ] `render.yaml` —Å–æ–∑–¥–∞–Ω –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- [ ] Backend —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ (`npm run build`)
- [ ] Telegram Bot Token –µ—Å—Ç—å –≤ `.env`
- [ ] –ë–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É –∫—É—Ö–Ω–∏
- [ ] –ë–æ—Ç —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–æ–º –≥—Ä—É–ø–ø—ã

---

**–ì–æ—Ç–æ–≤–æ!** –í–∞—à backend –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Render! üéâ
